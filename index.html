<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>$FLEX is your life ‚Äî Flexcoin</title>
  <link rel="manifest" href="/site.webmanifest">
  <link rel="apple-touch-icon" href="/icons/flexcoin-192.png">
  <link rel="preload" as="image" href="/public/hero/main.jpg">
  <meta name="theme-color" content="#f5c542">

  <meta name="msvalidate.01" content="F392338F667D8A882F047C0953403BC5" />
  <meta name="description" content="FlexCoin (FLEX) is a luxury-themed meme coin on BNB Chain with transparent tokenomics, completed KYC & audit, locked liquidity and a fair DexSale presale for global crypto communities in the US, Turkey, Vietnam and the Philippines.">

  <!-- SEO keywords (US / Turkey / Vietnam / Philippines Ï§ëÏã¨ 30Í∞ú) -->
  <meta name="keywords" content="
FlexCoin,
Flexcoin meme coin,
FLEX token,
BNB Chain meme coin,
BNB Chain presale,
crypto presale 2025,
new meme coin 2025,
audited meme coin,
locked liquidity token,
KYC verified crypto,
community driven crypto,
fair launch token,
US crypto investors,
Turkey crypto community,
Vietnam crypto community,
Philippines crypto traders,
meme coin presale BNB,
low cap gem crypto,
luxury meme coin,
DeFi meme token,
DexSale presale,
BSC token presale,
transparent team crypto,
long term crypto project,
global meme coin project,
safe BNB chain token,
Flexcoin whitepaper,
Flexcoin roadmap,
Flexcoin Telegram community,
Flexcoin official website
">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="FlexCoin">
  <meta property="og:title" content="$FLEX is your life ‚Äî Flexcoin">
  <meta property="og:description" content="FlexCoin (FLEX) is a luxury meme coin on BNB Chain with transparent tokenomics, KYC & audit completed, locked liquidity and a fair DexSale presale for global crypto communities.">
  <link rel="canonical" href="https://flexcoin.io.kr/" />
  <meta property="og:url" content="https://flexcoin.io.kr/">
  <meta property="og:image" content="https://flexcoin.io.kr/public/hero/main.jpg">
  <meta property="og:locale" content="en_US">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="$FLEX is your life ‚Äî Flexcoin">
  <meta name="twitter:description" content="FlexCoin (FLEX) is a luxury meme coin on BNB Chain with transparent tokenomics, KYC & audit completed, locked liquidity and a fair DexSale presale for global crypto communities.">
  <meta name="twitter:image" content="https://flexcoin.io.kr/public/hero/main.jpg">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/public/favicon.svg">
  <link rel="alternate icon" href="/public/favicon.ico">
  <link rel="alternate icon" href="/favicon.ico">

  <!-- Whitepaper discoverability (EN only) -->
  <link rel="alternate" hreflang="en" href="/public/whitepaper/en.pdf">

  <style>
    :root{
      --bg:#11100d; --card:#1b1915; --text:#eadfbb; --muted:#b9a97a;
      --gold:#f4cc4f; --chip:#3a331c; --border:rgba(255,255,255,.08);
    }
    html,body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:ui-sans-serif,system-ui,Apple SD Gothic Neo,Segoe UI,Roboto,Helvetica,Arial;
      overflow-x:hidden; max-width:100vw; overscroll-behavior-x:none
    }
    body{ padding-top:64px; }
    *{box-sizing:border-box}
    a{color:inherit; text-decoration:none}
    body.noscroll{overflow:hidden}

    .topbar{
      position:fixed; inset:0 auto auto 0; right:0; top:0;
      display:flex; align-items:center; gap:.5rem; padding:.8rem 1rem;
      background:linear-gradient(180deg,rgba(0,0,0,.75),rgba(0,0,0,.35));
      backdrop-filter:blur(6px); z-index:9999; border-bottom:1px solid var(--border);
    }
    .brand{font-weight:800;color:var(--gold);line-height:1.15;white-space:nowrap}
    .spacer{flex:1}
    .btn{
      border:none;border-radius:.7rem;padding:.55rem .9rem;cursor:pointer;
      background:var(--gold);color:#000;font-weight:800;display:inline-block;white-space:nowrap
    }
    .btn[disabled],
    .btn[aria-disabled="true"]{
      opacity:.45;cursor:not-allowed;pointer-events:none;
    }
    .nav a{margin-left:.6rem; font-weight:700; color:var(--gold); opacity:.9; white-space:nowrap}
    .nav a:hover{opacity:1}

    /* -------- Ïù¥ÎØ∏ÏßÄ ÎùºÏù¥Ìä∏Î∞ïÏä§ -------- */
    .lightbox {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.85);
      z-index: 9999;
    }
    .lightbox.open { display: flex; }
    .lightbox img {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 16px;
      box-shadow: 0 0 30px rgba(0,0,0,0.8);
      cursor: zoom-out;
    }

    @media(max-width:680px){
      .topbar{flex-wrap:wrap;gap:.4rem}
      .brand{flex:1 1 100%; font-size:1rem}
      .nav{order:3; width:100%; display:flex; gap:.8rem .6rem; flex-wrap:wrap}
      .btn{padding:.5rem .7rem}
    }

    .wrap{max-width:1100px;margin:0 auto;padding:1rem}
    .card{background:var(--card);border:1px solid var(--border);
      border-radius:18px;padding:16px;margin-top:1rem}
    .section-title{font-size:1.4rem;font-weight:900;margin:.4rem 0 1rem;color:var(--gold)}
    .muted{color:var(--muted);font-size:.95rem}

    .hero{background:#0f0e0c;border-radius:18px;overflow:hidden;border:1px solid var(--border)}
    .hero img{display:block;width:100%;height:auto}

    .tok-wrap{display:grid;grid-template-columns:320px 1fr;gap:18px}
    #donut{
      width:280px;
      height:280px;
      max-width:100%;
      aspect-ratio:1/1;
      display:block;
      margin:auto;
      background:#0f0e0c;
      border-radius:14px;
    }
    ul.legend{list-style:none;padding:0;margin:0;font-size:.95rem}
    ul.legend li{margin:.2rem 0;display:flex;align-items:center}
    .legend-dot{
      width:11px;height:11px;border-radius:50%;margin-right:6px;flex-shrink:0;
      border:1px solid rgba(0,0,0,.4);
    }
    #caps,#rates{margin-top:.35rem}
    .tokenomics-note{
      margin-top:.55rem;
      font-size:.9rem;
      color:var(--muted);
      line-height:1.45;
      text-align:left;
    }

    .countbox{border:1px solid var(--border);border-radius:14px;padding:14px;
      background:linear-gradient(180deg,rgba(255,255,255,.02),transparent)}
    #countdown{font-weight:900;font-size:1.35rem}

    .addr table{width:100%;border-collapse:collapse;font-size:.92rem}
    .addr td{padding:.45rem .55rem;border-bottom:1px dashed var(--border);word-break:break-all}
    .addr a{color:var(--gold);text-decoration:none}

    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .grid img{width:100%;height:auto;display:block;aspect-ratio:16/9;object-fit:cover;
      border-radius:12px;border:1px solid var(--border);background:#0f0e0c}
    @media(max-width:900px){
      .tok-wrap{grid-template-columns:1fr}
      .grid{grid-template-columns:repeat(2,1fr)}
      .addr td{font-size:.85rem}
    }

    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;
      align-items:center;justify-content:center;z-index:50;touch-action:none}
    .lightbox.show{display:flex}
    .lb-stage{position:relative;max-width:95vw;max-height:85vh;overflow:hidden;cursor:grab;border-radius:12px}
    .lb-img{user-select:none;pointer-events:auto;transform-origin:center center;display:block;max-width:none}
    .lb-toolbar{position:fixed;top:12px;right:12px;display:flex;gap:.4rem;z-index:60}
    .lb-toolbar .btn{padding:.4rem .6rem;border-radius:.6rem}
    .lb-hint{position:fixed;bottom:12px;left:12px;color:#ddd;font-size:.85rem;opacity:.8}

    .about-section{background:linear-gradient(180deg,#0a0a0a 0%, #111 100%);border:1px solid rgba(212,175,55,.25);
      border-radius:24px;padding:28px;margin:24px 0;box-shadow:0 10px 30px rgba(0,0,0,.35);color:#f1f1f1}
    .about-title{font-size:28px;font-weight:800;margin-bottom:8px;color:#f6e8b1}
    .about-sub{font-size:14px;color:#a0a0a0;margin-bottom:16px}
    .about-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
    .about-card{background:#0e0e0e;border:1px solid rgba(212,175,55,.15);border-radius:16px;padding:16px}
    .about-bullets{list-style:none;padding:0;margin:12px 0 0 0}
    .about-bullets li{margin:6px 0;padding-left:18px;position:relative}
    .about-bullets li:before{content:"‚úÖ";position:absolute;left:0;top:0.5px}
    blockquote.about-quote{margin:12px 0;border-left:4px solid rgba(212,175,55,.5);padding:8px 12px;color:#e9e1c8;font-style:italic}
    .small-muted{font-size:12px;color:#9a9a9a;margin-top:8px}

    .btn-row{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center;margin-top:.6rem}
    .btn-gold{background:var(--gold);color:#000;border-radius:.7rem;padding:.55rem .9rem;font-weight:800;border:0;cursor:pointer}
    .select-net{margin:8px 0;padding:.45rem .6rem;border-radius:.6rem;border:1px solid var(--border);background:#0f0e0c;color:var(--text)}
    .mint-log{background:#0f0e0c;border:1px solid var(--border);border-radius:12px;padding:10px;margin-top:10px;color:#ddd;font-size:.85rem;min-height:2.2em}

    #roadmap .grid{grid-template-columns:repeat(4,1fr)}
    #roadmap .roadmap-card{transition:transform .25s ease, box-shadow .25s ease}
    #roadmap .roadmap-card:hover{transform:translateY(-4px); box-shadow:0 4px 15px rgba(212,175,55,.15)}
    @media(max-width:900px){ #roadmap .grid{grid-template-columns:repeat(2,1fr)} }

    /* --- Chart & Alerts --- */
    #chart-box{margin-top:12px;border:1px solid var(--border);border-radius:14px;overflow:hidden;background:#0f0f0f}
    .chart-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--border)}
    .chart-body{height:520px}
    .chart-body iframe{width:100%;height:100%;border:0;display:block}

    .alert-wrap{display:grid;gap:10px;grid-template-columns:1fr 1fr}
    .alert-wrap input{width:100%;padding:.6rem .7rem;border-radius:.6rem;border:1px solid var(--border);background:#0f0e0c;color:var(--text)}
    .alert-hint{font-size:.85rem;color:var(--muted)}
    @media(max-width:700px){ .alert-wrap{grid-template-columns:1fr} .chart-body{height:420px} }

    .alerts-header{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .alerts-email{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      text-align:right;
    }
    .alerts-email-label{
      font-size:.85rem;
      color:var(--muted);
      opacity:.95;
    }
    .alerts-email-link{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.95rem;
      font-weight:900;
      color:var(--gold);
      text-decoration:none;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:12px;
      background:rgba(255,255,255,.04);
      position:relative;
      z-index:1;
      pointer-events:auto;
      white-space:nowrap;
    }
    .alerts-email-link:hover{
      background:rgba(244,204,79,.12);
      border-color:rgba(244,204,79,.35);
      text-decoration:underline;
    }
    @media(max-width:700px){
      .alerts-header{justify-content:center;text-align:center}
      .alerts-email{justify-content:center;text-align:center}
      .alerts-email-link{white-space:normal}
    }

    /* Security Shield Zone */
    .security-zone{
      margin-top:1rem;
      border-radius:18px;
      border:1px solid var(--border);
      background:
        radial-gradient(circle at top, rgba(244,204,79,0.16), transparent 60%),
        linear-gradient(180deg,#050505,#11100d);
    }
    .security-zone .muted{margin-bottom:.4rem}
    .security-buttons{justify-content:flex-start}
    .security-btn{min-width:140px;text-align:center}
  </style>

  <!-- ethers CDN -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.12.1/dist/ethers.umd.min.js"></script>

  <!-- JSON-LD -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "FlexCoin",
  "alternateName": "FLEX",
  "url": "https://flexcoin.io.kr",
  "logo": "https://flexcoin.io.kr/public/favicon.svg",
  "description": "FlexCoin (FLEX) is a luxury-themed meme coin on BNB Chain with transparent tokenomics, completed KYC & audit, and locked liquidity.",
  "sameAs": [
    "https://x.com/Flexcoinmeme",
    "https://t.me/flexcoinmeme",
    "https://www.dx.app/dxsale/view?address=0x6fcE9aD19Da522B03813Ef69106bb077A6d84d1C&chain=56",
    "https://bscscan.com/token/0xBa29562241F0489504C493c47aCBA16d7a98998f"
  ]
}
  </script>
</head>

<body>
  <!-- Top bar -->
  <div class="topbar">
    <div class="brand" id="brand">$FLEX is your life. Your life is FLEX.</div>
    <div class="spacer"></div>
    <div class="nav">
      <a href="#about-flexcoin">About</a>
      <a href="#roadmap">Roadmap</a>
      <a href="#nft">NFT</a>
    </div>
    <a id="btn-x" class="btn" href="#" target="_blank" rel="noopener">X</a>
    <a id="btn-tg" class="btn" href="#" target="_blank" rel="noopener">Telegram</a>
    <a id="btn-pcs" class="btn" href="#" target="_blank" rel="noopener">Buy on PancakeSwap</a>
  </div>

  <div class="wrap">
    <!-- HERO -->
    <section class="card hero">
      <img
        id="hero-img"
        src="/public/hero/main.jpg"
        alt="FlexCoin luxury meme coin hero illustration with FLEX gold coin and two flexing characters"
        loading="eager"
        fetchpriority="high"
        onerror="this.onerror=null;this.src='/public/hero/1.jpg'">
    </section>

    <!-- Security Shield Zone -->
    <section id="security-zone" class="card security-zone">
      <div class="section-title">Security Shield Zone</div>
      <p class="muted" id="security-desc">
        Audit / KYC / LP Lock / Team Wallet Lock / BscScan / Whitepaper links are published here. Always verify before you act.
      </p>
      <div class="btn-row security-buttons">
        <a id="btn-security-audit" class="btn security-btn" aria-disabled="true">Audit</a>
        <a id="btn-security-kyc" class="btn security-btn" aria-disabled="true">KYC</a>
        <a id="btn-security-lplock" class="btn security-btn" aria-disabled="true">LP Lock</a>
        <a id="btn-security-bscscan" class="btn security-btn" aria-disabled="true">BscScan</a>
        <a id="btn-security-teamlock" class="btn security-btn" aria-disabled="true">Team Wallet Lock</a>
        <a id="btn-security-whitepaper" class="btn security-btn" href="/public/whitepaper/en.pdf" target="_blank" rel="noopener">Whitepaper (EN)</a>
      </div>
    </section>

    <!-- About -->
    <section id="about-flexcoin" class="about-section">
      <div class="about-title">About FlexCoin</div>
      <div class="about-sub">Luxury meme culture meets transparency.</div>
      <div class="about-grid">
        <div class="about-card">
          <h3 style="margin:0 0 8px 0">English</h3>
          <p>FlexCoin isn‚Äôt just a memecoin. ‚ÄúFlex‚Äù means proudly expressing your <b>capability, spending power, and confidence</b>. FlexCoin captures that <b>lifestyle</b>.</p>
          <blockquote class="about-quote">‚ÄúFlexing isn‚Äôt showing off ‚Äî it‚Äôs owning your story.‚Äù</blockquote>
          <p>We choose transparency, because transparency creates trust.</p>
          <ul class="about-bullets">
            <li><b>Team KYC Verified</b></li>
            <li><b>Smart Contract Audit Completed</b></li>
            <li><b>LP Locked + Ownership Renounced</b></li>
            <li><b>100% Public Tokenomics & Wallet Allocation</b></li>
          </ul>
          <p class="small-muted">Everything is verifiable on-chain.</p>
        </div>
      </div>
    </section>

    <!-- Tokenomics -->
    <section class="card">
      <div class="section-title">Tokenomics</div>
      <div class="tok-wrap">
        <canvas id="donut" width="300" height="300" aria-label="Tokenomics donut"></canvas>
        <div>
          <ul class="legend" id="legend"></ul>
          <div id="caps" class="muted"></div>
          <div id="rates" class="muted"></div>

          <div class="btn-row" style="justify-content:flex-start;margin-top:12px">
            <a id="btn-presale-dxsale" class="btn" aria-disabled="true">DexSale Presale</a>
          </div>

          <div id="tokenomics-note" class="tokenomics-note"></div>
        </div>
      </div>
    </section>

    <!-- Countdown -->
    <section class="card">
      <div class="section-title">Presale Countdown</div>
      <div class="countbox">
        <div id="countdown">‚Äî</div>
        <div id="countdown-range" class="muted">‚Äî</div>
      </div>
    </section>

    <!-- Action Preview -->
    <section class="card">
      <div class="section-title">Action Preview</div>
      <div class="grid" id="action-grid"></div>
    </section>

    <!-- NFT Preview -->
    <section class="card">
      <div class="section-title">NFT Preview</div>
      <div class="grid" id="nft-grid"></div>
    </section>

    <!-- Image Lightbox (simple) -->
    <div id="img-lightbox" class="lightbox">
      <img id="img-lightbox-img" src="" alt="">
    </div>

    <!-- Addresses -->
    <section class="card addr">
      <div class="section-title">Addresses</div>
      <table id="addr-table"></table>
    </section>

    <!-- Roadmap -->
    <section id="roadmap" class="card">
      <div class="section-title">Roadmap</div>
      <div class="grid">
        <div class="roadmap-card card">
          <div class="muted">Phase 1</div>
          <div style="font-weight:800;margin-top:.2rem">
            Successful Launch & Survive in the Memecoin Sector
          </div>
        </div>
        <div class="roadmap-card card">
          <div class="muted">Phase 2</div>
          <div style="font-weight:800;margin-top:.2rem">
            Community Activation & Achieve 1,000 Holders
          </div>
        </div>
        <div class="roadmap-card card">
          <div class="muted">Phase 3</div>
          <div style="font-weight:800;margin-top:.2rem">
            DEX & CEX Exchange Listings
          </div>
        </div>
        <div class="roadmap-card card">
          <div class="muted">Phase 4</div>
          <div style="font-weight:800;margin-top:.2rem">
            Ecosystem Expansion (AI & NFT)
          </div>
        </div>
      </div>
    </section>

    <!-- NFT MINT -->
    <section id="nft" class="card">
      <div class="section-title">FLEX NFT MINT</div>
      <div class="muted" style="margin-top:6px; font-weight:700; text-align:center; line-height:1.6;">
        1) CONNECT WALLET<br>
        ‚Üì<br>
        2) CHOOSE MINT TYPE (LEGACY / FLEXNFT)<br>
        ‚Üì<br>
        3) MINT
      </div>

      <div style="text-align:center;">
        <select id="net" class="select-net">
          <option value="bscMainnet">BNB Mainnet</option>
          <option value="bscTestnet">BNB Testnet</option>
        </select>
        <div class="btn-row">
          <button id="connect" class="btn-gold">Connect Wallet</button>
          <button id="mint" class="btn-gold" disabled>Mint NFT (Legacy)</button>
          <button id="btn-nft-mint" class="btn-gold">Mint FlexNFT (0.0001 BNB)</button>
        </div>

        <pre id="mint-log" class="mint-log">[ Waiting for connection... ]</pre>
        <div id="wallet-hint" class="muted" style="margin-top:6px; text-align:center; display:none;"></div>
      </div>

      <!-- Live Chart box -->
      <div id="chart-box">
        <div class="chart-head">
          <div><b>Live Price / Chart</b></div>
          <div class="muted" id="chart-hint">Dexscreener embed will show here if configured.</div>
        </div>
        <div class="chart-body" id="chart-body"></div>
      </div>
    </section>

    <!-- Alerts -->
    <section id="alerts" class="card">
      <div class="alerts-header">
        <div class="section-title">Alerts</div>
        <div class="alerts-email">
          <span class="alerts-email-label">Team official email:</span>
          <a
            class="alerts-email-link"
            href="https://mail.google.com/mail/?view=cm&fs=1&to=contact@flexcoin.io.kr"
            target="_blank"
            rel="noopener"
            aria-label="Open Gmail compose to contact Flexcoin team"
          >contact@flexcoin.io.kr</a>
        </div>
      </div>

      <div class="alert-wrap">
        <input id="alert-email" type="email" placeholder="Email address" autocomplete="email">
        <input id="alert-tg" type="text" placeholder="Telegram @handle (optional)" autocomplete="off">
      </div>
      <div class="btn-row">
        <button id="alert-submit" class="btn">Notify me</button>
      </div>
      <div id="alert-msg" class="alert-hint">Enter your email to get presale & listing alerts. (coming soon if backend not set)</div>
    </section>
  </div>

  <!-- Lightbox (advanced) -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <div class="lb-toolbar">
      <button class="btn" id="lb-zoom-in">+</button>
      <button class="btn" id="lb-zoom-out">‚àí</button>
      <button class="btn" id="lb-reset">75%</button>
      <button class="btn" id="lb-close">Close</button>
    </div>
    <div class="lb-hint">Use wheel/pinch to zoom, drag to move, ESC to close</div>
    <div class="lb-stage" id="lb-stage">
      <img id="lb-img" class="lb-img" alt="preview">
    </div>
  </div>

  <script>
    const $ = (q)=>document.querySelector(q);

    /* ---------------- Whitepaper Direct Router (EN only) ---------------- */
    (function directWhitepaperRouter(){
      const lower = (s)=> (s || '').toLowerCase();

      async function findEnPdf(){
        const p = '/public/whitepaper/en.pdf';
        try{
          const r = await fetch(p, { method: 'HEAD', cache: 'no-cache' });
          return r.ok ? p : null;
        }catch(_){
          return null;
        }
      }

      async function handlePath(){
        const p = lower(location.pathname);
        const m = p.match(/^\/(whitepaper|wp|pdf)(?:\/)?([a-z]{2})?(?:\.pdf)?$/);
        if(!m) return false;

        const url = await findEnPdf();
        if(url){
          window.open(url,'_blank','noopener');
          return true;
        }
        return false;
      }

      async function handleHash(){
        const h = lower(location.hash || '');
        if(h === '#whitepaper' || h.startsWith('#whitepaper-') || h.startsWith('#whitepaper_')){
          const url = await findEnPdf();
          if(url){
            window.open(url,'_blank','noopener');
            return true;
          }
        }
        return false;
      }

      handlePath();
      handleHash();
    })();

    /* --------- Utils --------- */
    async function fetchFirst(paths){
      for(const p of paths){
        try{
          const r=await fetch(p,{cache:'no-cache'});
          if(r.ok) return r.json();
        }catch(_){}
      }
      return {};
    }
    function firstExistingImage(paths){
      return new Promise(resolve=>{
        let i=0; const next=()=>{
          if(i>=paths.length) return resolve(null);
          const img=new Image(); img.onload=()=>resolve(paths[i]); img.onerror=()=>{ i++; next(); }; img.src=paths[i];
        };
        next();
      });
    }

    /* --------- Links + Addresses + Chart + Alerts + Security Zone --------- */
    async function initLinks(){
      const links = await fetchFirst(['/public/config/links.json','/config/links.json']);

      if (!links.kyc_url) {
        links.kyc_url = '/public/security/kyc_flexcoin.jpg';
      }

      const setBtn=(id,url)=>{
        const b=$(id);
        if(!b) return;
        if(url){ b.href=url; b.removeAttribute('disabled'); }
        else { b.removeAttribute('href'); b.setAttribute('disabled',''); }
      };
      setBtn('#btn-x',links.x_url);
      setBtn('#btn-tg',links.tg_url);
      setBtn('#btn-pcs',links.pancakeswap_url);

      const setSec = (id,url)=>{
        const el = $(id);
        if(!el) return;
        if(url){
          el.href = url;
          el.removeAttribute('aria-disabled');
          el.target = '_blank';
          el.rel = 'noopener';
        }else{
          el.href = '#';
          el.setAttribute('aria-disabled','true');
        }
      };
      setSec('#btn-security-audit', links.audit_url || '');
      setSec('#btn-security-kyc', links.kyc_url || '');
      setSec('#btn-security-lplock', links.lp_lock_url || '');

      const teamLockDefault = 'https://www.dx.app/dxlock/view/token-locker?address=0xACA5524959729fBa95b9610ae560b20EAC2F1f3C&chain=56';
      setSec('#btn-security-teamlock', links.team_lock_url || teamLockDefault);

      const addr = await fetchFirst(['/public/config/addresses.json','/config/addresses.json']);
      const toScan=(a)=>a?`https://bscscan.com/address/${a}`:'#';

      const rows=[
        ['Token',addr.token],
        ['Team/Lock',addr.team_lock||addr.team],
        ['Marketing',addr.marketing],
        ['Presale',addr.presale],
        ['User',addr.user]
      ];
      $('#addr-table').innerHTML = rows
        .map(([k,v])=>`<tr><td>${k}</td><td><a href="${toScan(v)}" target="_blank" rel="noopener">${v||''}</a></td></tr>`)
        .join('');

      const bscBtn = $('#btn-security-bscscan');
      if(bscBtn){
        const tokenScan = addr.token ? `https://bscscan.com/token/${addr.token}` : '';
        const url = links.bscscan_url || links.dexscreener_url || tokenScan;
        if(url){
          bscBtn.href = url;
          bscBtn.removeAttribute('aria-disabled');
          bscBtn.target='_blank';
          bscBtn.rel='noopener';
        }else{
          bscBtn.href='#';
          bscBtn.setAttribute('aria-disabled','true');
        }
      }

      const chartBody = $('#chart-body');
      const hint = $('#chart-hint');
      let dexUrl = links.dexscreener_url || '';
      if(!dexUrl){
        const cmc = `https://dex.coinmarketcap.com/token/bsc/${addr.token||''}/`;
        chartBody.innerHTML = `<div style="padding:18px;text-align:center">
          <div class="muted" style="margin-bottom:10px">Dexscreener URL is not configured yet.</div>
          <a class="btn" href="${cmc}" target="_blank" rel="noopener">Open CMC DEX Chart</a>
        </div>`;
        hint.textContent = 'CMC cannot be embedded in an iframe, it will open in a new tab.';
      }else{
        chartBody.innerHTML = `<iframe src="${dexUrl}${dexUrl.includes('?')?'&':'?'}embed=1&theme=dark" loading="lazy"></iframe>`;
        hint.textContent = 'Powered by Dexscreener';
      }

      const formEndpoint = links.form_endpoint || '';
      const btn = $('#alert-submit');
      btn.onclick = async ()=>{
        const email = $('#alert-email').value.trim();
        const tg = $('#alert-tg').value.trim();
        const msg = $('#alert-msg');
        if(!email){ msg.textContent = 'Please enter your email.'; return; }
        if(!formEndpoint){ msg.textContent = 'Alerts backend not set (coming soon).'; return; }
        try{
          const r = await fetch(formEndpoint,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,tg,ts:new Date().toISOString(),source:'flexcoin'})});
          if(r.ok){ msg.textContent='Subscribed! We will notify you.'; $('#alert-email').value=''; $('#alert-tg').value=''; }
          else{ msg.textContent='Submit failed. Please try again later.'; }
        }catch(e){ msg.textContent='Network error. Please try again.'; }
      };
    }

    /* --------- Hero --------- */
    async function initHero(){
      const src = await firstExistingImage(['/public/hero/main.jpg','/hero/main.jpg','/public/hero/1.jpg','/hero/1.jpg']);
      if(src){ const img=$('#hero-img'); img.src=src; }
    }

    /* --------- Tokenomics --------- */
    async function initTokenomics(){
      const j = await fetchFirst(['/public/config/allocations.json','/config/allocations.json']);
      const t = j.tokenomics || {lp:54,presale:20,team:15,marketing:10,burn:1};

      const canvas = $('#donut');
      if(!canvas) return;
      const ctx = canvas.getContext('2d');

      const vals=[t.lp,t.presale,t.team,t.marketing,t.burn];
      const names=['LP','Presale','Team','Marketing','Burn'];
      const cols=['#ffd85a','#ff944d','#53d878','#4da1ff','#ff6b6b'];

      const w = canvas.width;
      const h = canvas.height;
      const size = Math.min(w,h);
      const cx = w/2;
      const cy = h/2;
      const outerR = size*0.46;
      const innerR = size*0.27;

      ctx.clearRect(0,0,w,h);
      const total = vals.reduce((acc,v)=>acc + (v||0), 0) || 1;
      let start = -Math.PI/2;

      vals.forEach((v,i)=>{
        const value = v || 0;
        if(value <= 0) return;
        const ratio = value / total;
        const end = start + 2*Math.PI*ratio;

        ctx.beginPath();
        ctx.moveTo(cx,cy);
        ctx.arc(cx,cy,outerR,start,end);
        ctx.closePath();
        ctx.fillStyle = cols[i];
        ctx.fill();

        start = end;
      });

      ctx.globalCompositeOperation = 'destination-out';
      ctx.beginPath();
      ctx.arc(cx,cy,innerR,0,2*Math.PI);
      ctx.fill();
      ctx.globalCompositeOperation = 'source-over';

      $('#legend').innerHTML = names.map((n,i)=>`
        <li><span class="legend-dot" style="background:${cols[i]}"></span>${n} ${vals[i]}%</li>
      `).join('');

      const p = j.presale || {};
      const soft = p.softcap_bnb ?? j.softcap ?? '‚Äî';
      const hard = p.hardcap_bnb ?? j.hardcap ?? '‚Äî';
      $('#caps').textContent=`Softcap: ${soft} BNB / Hardcap: ${hard} BNB`;

      const pres = Number(p.rate_flex_per_bnb ?? (j.rates?.presale||0));
      const list = Number(p.listing_rate_flex_per_bnb ?? (j.rates?.listing||0));
      const fmtN=(n)=> (Number.isFinite(n)&&n>0)? n.toLocaleString():'‚Äî';
      $('#rates').textContent=`Presale Rate: 1 BNB = ${fmtN(pres)} FLEX  ‚Ä¢  Listing Rate: 1 BNB = ${fmtN(list)} FLEX`;

      const note = $('#tokenomics-note');
      if(note){
        const lockDays = p.lp_lock_days ?? j.lp_lock_days ?? 365;
        note.innerHTML = `
          ‚Ä¢ LP <b>${t.lp}%</b> ‚Äî DEX liquidity, locked for at least <b>${lockDays} days</b>.<br>
          ‚Ä¢ Presale <b>${t.presale}%</b> ‚Äî Launchpad allocations (DexSale).<br>
          ‚Ä¢ Team <b>${t.team}%</b> ‚Äî Long-term builder allocation (vesting schedule to be announced).<br>
          ‚Ä¢ Marketing <b>${t.marketing}%</b> ‚Äî Marketing, listings and ecosystem growth only.
        `;
      }

      const links = await fetchFirst(['/public/config/links.json','/config/links.json']);
      const btn = $('#btn-presale-dxsale');
      const dxUrl = links.dexsale_url || links.presale_url || '';
      if(btn){
        if(dxUrl){
          btn.textContent = 'DexSale Presale';
          btn.href = dxUrl;
          btn.removeAttribute('aria-disabled');
          btn.target = '_blank';
          btn.rel = 'noopener';
        }else{
          btn.textContent = 'DexSale Presale (coming soon)';
          btn.removeAttribute('href');
          btn.setAttribute('aria-disabled','true');
        }
      }
    }

    /* --------- Countdown --------- */
    async function initCountdown(){
      let sISO='2025-12-18T21:00:00+09:00', eISO='2026-01-01T21:00:00+09:00';
      const p = await fetchFirst(['/public/config/presale.json','/config/presale.json']);
      if(p.presale_start||p.start){ const x=(p.presale_start||p.start); sISO=x+(String(x).includes('+')?'':'+09:00'); }
      if(p.presale_end||p.end){ const y=(p.presale_end||p.end); eISO=y+(String(y).includes('+')?'':'+09:00'); }
      const s=new Date(sISO), e=new Date(eISO);
      const range=$('#countdown-range'),count=$('#countdown');
      const z=(n)=>String(n).padStart(2,'0');
      const fmt=(d)=>`${d.getFullYear()}. ${z(d.getMonth()+1)}. ${z(d.getDate())}. ${z(d.getHours())}:${z(d.getMinutes())}:${z(d.getSeconds())}`;
      range.textContent=`${fmt(s)} ‚Üí ${fmt(e)}`;
      const tick=()=>{ const now=new Date(); let t=s-now; if(t<0) t=e-now; if(t<=0){ count.textContent='‚Äî'; return; }
        const d=Math.floor(t/86400000); t%=86400000; const h=Math.floor(t/3600000); t%=3600000; const m=Math.floor(t/60000); t%=60000; const s2=Math.floor(t/1000);
        count.textContent=`${d}d ${z(h)}:${z(m)}:${z(s2)}`; };
      tick(); setInterval(tick,1000);
    }

    /* --------- Gallery --------- */
    async function loadGrid(prefix, targetId){
      const list=Array.from({length:8},(_,i)=>i+1);
      const decided=await Promise.all(list.map(n=> firstExistingImage([`/public${prefix}/${n}.jpg`, `${prefix}/${n}.jpg`])));
      const ok=decided.filter(Boolean);
      const el=$(targetId);
      el.innerHTML = ok.length
        ? ok.map(src=>`<img src="${src}" alt="FlexCoin gallery image">`).join('')
        : '<div class="muted">Images coming soon.</div>';
      el.querySelectorAll('img').forEach(img=>{
        img.style.cursor='zoom-in';
        img.addEventListener('click',()=>openLightbox(img.src));
      });
    }

    /* --------- Advanced Lightbox --------- */
    const lb=$('#lightbox'), lbImg=$('#lb-img'), lbStage=$('#lb-stage');
    let scale=0.75, minS=0.5, maxS=6, pos={x:0,y:0}, dragging=false, startPos={x:0,y:0};
    function applyLB(){ lbImg.style.transform=`translate(${pos.x}px,${pos.y}px) scale(${scale})`; }
    function openLightbox(src){ lbImg.src=src; scale=0.75; pos={x:0,y:0}; applyLB(); lb.classList.add('show'); document.body.classList.add('noscroll'); }
    function closeLightbox(){ lb.classList.remove('show'); document.body.classList.remove('noscroll'); }
    $('#lb-close').onclick=closeLightbox; $('#lb-reset').onclick=()=>{scale=0.75;pos={x:0,y:0};applyLB();};
    $('#lb-zoom-in').onclick=()=>{ scale=Math.min(maxS,scale*1.2); applyLB(); };
    $('#lb-zoom-out').onclick=()=>{ scale=Math.max(minS,scale/1.2); applyLB(); };
    lbStage.addEventListener('wheel',(e)=>{ e.preventDefault(); const k=e.deltaY>0?1.2:1/1.2; scale=Math.min(maxS,Math.max(minS,scale*k)); applyLB(); },{passive:false});
    lbStage.addEventListener('mousedown',(e)=>{ dragging=true; lbStage.style.cursor='grabbing'; startPos={x:e.clientX-pos.x,y:e.clientY-pos.y}; });
    window.addEventListener('mousemove',(e)=>{ if(!dragging) return; pos={x:e.clientX-startPos.x,y:e.clientY-startPos.y}; applyLB(); });
    window.addEventListener('mouseup',()=>{ dragging=false; lbStage.style.cursor='grab'; });

    lb.addEventListener('click',(e)=>{ if(e.target===lb) closeLightbox(); });

    /* --------- Wallet / NFT Mint (unchanged core logic) --------- */
    const CHAINS = {
      bscTestnet: {
        chainId: "0x61",
        name: "BSC Testnet",
        rpc: "https://data-seed-prebsc-1-s3.binance.org:8545",
      },
      bscMainnet: {
        chainId: "0x38",
        name: "BSC",
        rpc: "https://bsc-dataseed.binance.org",
      },
    };

    const DEFAULT_PRICE_BNB = window.NFT_PRICE_BNB || "0.0001";

    const NATIVE_TOKEN = "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE";

    const DROP_ABI = [
      "function claim(address receiver,uint256 quantity,address currency,uint256 pricePerToken,(bytes32[] proof,uint256 quantityLimitPerWallet,uint256 pricePerToken,address currency) allowlistProof,bytes data) payable",
    ];

    let NFT_ADDR = {
      bscMainnet: "0xYourMainnetNFTAddress",
      bscTestnet: "0xYourTestnetNFTAddress",
    };

    let signer = null;

    function setMintButtons(enabled) {
      const legacy = document.querySelector("#mint");
      const flex = document.querySelector("#btn-nft-mint");
      [legacy, flex].forEach((b) => {
        if (!b) return;
        if (enabled) b.removeAttribute("disabled");
        else b.setAttribute("disabled", "");
      });
    }

    function short(addr) {
      return addr ? addr.slice(0, 6) + "‚Ä¶" + addr.slice(-4) : "";
    }

    async function ensureChain(chainKey) {
      const { ethereum } = window;
      if (!ethereum) throw new Error("MetaMask not installed.");
      const target = CHAINS[chainKey];
      try {
        await ethereum.request({
          method: "wallet_switchEthereumChain",
          params: [{ chainId: target.chainId }],
        });
      } catch (e) {
        if (e && e.code === 4902) {
          await ethereum.request({
            method: "wallet_addEthereumChain",
            params: [{
              chainId: target.chainId,
              chainName: target.name,
              rpcUrls: [target.rpc],
              nativeCurrency: { name: "BNB", symbol: "BNB", decimals: 18 },
            }],
          });
        } else {
          throw e;
        }
      }
    }

    async function connectWallet() {
      const netSel = document.querySelector("#net").value;
      await ensureChain(netSel);
      const provider = new ethers.BrowserProvider(window.ethereum);
      signer = await provider.getSigner();
      const addr = await signer.getAddress();
      document.querySelector("#connect").textContent = "Connected: " + short(addr);
      document.querySelector("#mint-log").textContent = "Connected: " + addr;
      setMintButtons(true);
      return signer;
    }

    function bindWalletEvents() {
      if (!window.ethereum) return;

      window.ethereum.on("accountsChanged", async (accs) => {
        const logEl = document.querySelector("#mint-log");
        if (!accs || accs.length === 0) {
          document.querySelector("#connect").textContent = "Connect Wallet";
          setMintButtons(false);
          if (logEl) logEl.textContent = "[ Waiting for connection... ]";
          signer = null;
          return;
        }
        const addr = accs[0];
        document.querySelector("#connect").textContent = "Connected: " + short(addr);
        if (logEl) logEl.textContent = "Account: " + addr;
      });

      window.ethereum.on("chainChanged", async (hex) => {
        const v =
          hex === "0x38" ? "bscMainnet" :
          hex === "0x61" ? "bscTestnet" :
          null;
        if (v) document.querySelector("#net").value = v;
      });

      window.ethereum.on("disconnect", () => {
        const logEl = document.querySelector("#mint-log");
        document.querySelector("#connect").textContent = "Connect Wallet";
        setMintButtons(false);
        if (logEl) logEl.textContent = "[ Waiting for connection... ]";
        signer = null;
      });
    }

    async function setupMintUI() {
      const addrConfig = await fetchFirst([
        "/public/config/addresses.json",
        "/config/addresses.json",
      ]);
      if (addrConfig.nft_mainnet) NFT_ADDR.bscMainnet = addrConfig.nft_mainnet;
      if (addrConfig.nft_testnet) NFT_ADDR.bscTestnet = addrConfig.nft_testnet;

      setMintButtons(false);
      bindWalletEvents();

      const btnConnect = document.querySelector("#connect");
      const btnLegacy = document.querySelector("#mint");
      const btnFlex = document.querySelector("#btn-nft-mint");
      const logEl = document.querySelector("#mint-log");
      const hintEl = document.querySelector("#wallet-hint");

      if (hintEl) {
        const ua = (navigator.userAgent || "").toLowerCase();
        const isMobile = /android|iphone|ipad|ipod|samsungbrowser|mobile/.test(ua);
        if (isMobile) {
          hintEl.style.display = "block";
          hintEl.innerHTML =
            "üì± <b>Mobile wallet tip</b><br>" +
            "If the wallet does not connect, open the <b>MetaMask app</b>, go to the <b>Browser</b> tab, " +
            "visit <b>flexcoin.io.kr</b>, then press <b>Connect Wallet</b> again on this page.";
        }
      }

      btnConnect.onclick = async () => {
        try {
          if (!window.ethereum) {
            const msg =
              "No injected wallet detected. On mobile, open this site inside the MetaMask app browser. On desktop, install the MetaMask extension.";
            if (logEl) logEl.textContent = msg;
            if (hintEl) {
              hintEl.style.display = "block";
              hintEl.innerHTML =
                "‚ö†Ô∏è <b>No wallet detected</b><br>" +
                "Mobile: Open the <b>MetaMask app</b>, go to the <b>Browser</b> tab, visit <b>flexcoin.io.kr</b> and try again.<br>" +
                "Desktop: Install the <b>MetaMask</b> browser extension and then click <b>Connect Wallet</b>.";
            }
            alert(
              "No wallet detected.\n\n" +
              "Mobile: Open the MetaMask app, go to the Browser tab, visit flexcoin.io.kr and press Connect Wallet again.\n\n" +
              "Desktop: Install the MetaMask browser extension and then click Connect Wallet."
            );
            return;
          }
          await connectWallet();
        } catch (e) {
          logEl.textContent =
            "Connect error: " +
            (e && e.message ? e.message : String(e));
        }
      };

      async function runMint() {
        try {
          if (!signer) await connectWallet();

          const chainKey = document.querySelector("#net").value;
          const to = await signer.getAddress();
          const target = NFT_ADDR[chainKey];

          if (!target || target.length < 20) {
            throw new Error("NFT contract address is not configured.");
          }

          const pricePerToken = ethers.parseEther(DEFAULT_PRICE_BNB);

          const contract = new ethers.Contract(target, DROP_ABI, signer);

          const allowlistProof = {
            proof: [],
            quantityLimitPerWallet: 1n,
            pricePerToken,
            currency: NATIVE_TOKEN,
          };

          logEl.textContent = "Minting... please confirm in MetaMask.";

          const tx = await contract.claim(
            to,
            1n,
            NATIVE_TOKEN,
            pricePerToken,
            allowlistProof,
            "0x",
            { value: pricePerToken }
          );

          logEl.textContent = "Minting... TX: " + tx.hash;
          await tx.wait();
          logEl.textContent = "‚úÖ Minted successfully!";
        } catch (e) {
          const msg = (e && e.reason) || (e && e.message) || String(e);
          console.error("Mint error:", e);
          logEl.textContent = "Mint error: " + msg;
        }
      }

      btnLegacy.onclick = runMint;
      btnFlex.onclick = runMint;
    }

    /* --------- Boot --------- */
    (async () => {
      await initLinks();
      await initHero();
      await initTokenomics();
      await initCountdown();
      await loadGrid("/action", "#action-grid");
      await loadGrid("/nft-preview", "#nft-grid");
      await setupMintUI();
    })();

    /* -------- Simple Image Lightbox for grids -------- */
    function initImageLightbox() {
      const overlay = document.getElementById("img-lightbox");
      const overlayImg = document.getElementById("img-lightbox-img");
      if (!overlay || !overlayImg) return;

      function openLightbox2(src, alt) {
        overlayImg.src = src;
        overlayImg.alt = alt || "";
        overlay.classList.add("open");
      }

      function closeLightbox2() {
        overlay.classList.remove("open");
        overlayImg.src = "";
      }

      overlay.addEventListener("click", () => closeLightbox2());
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeLightbox2();
      });

      const selectors = ["#action-grid img", "#nft-grid img"];
      selectors.forEach((sel) => {
        document.querySelectorAll(sel).forEach((el) => {
          el.style.cursor = "zoom-in";
          el.addEventListener("click", (e) => {
            e.preventDefault();
            const src = el.src;
            if (!src) return;
            openLightbox2(src, el.alt || "");
          });
        });
      });
    }

    window.addEventListener("load", initImageLightbox);
  </script>
</body>
</html>
