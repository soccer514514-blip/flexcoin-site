<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flexcoin — $FLEX</title>
    <meta
      name="description"
      content="Flexcoin — Luxury × Meme. $FLEX"
    />
    <meta property="og:title" content="Flexcoin — $FLEX" />
    <meta
      property="og:description"
      content="Survive the memecoin sector with style."
    />
    <meta property="og:type" content="website" />
    <link rel="icon" href="/favicon.ico" />
  </head>

  <body>
    <div id="app"></div>

    <!-- ================================
         Flexcoin Multi-Path Loader (Vite)
         ================================ -->
    <script type="module">
      (async () => {
        // 여러 경로 중 존재하는 manifest.json을 찾습니다.
        const manifestPaths = [
          '/manifest.json',
          '/.vite/manifest.json',
          '/assets/manifest.json'
        ];

        async function loadManifest(path) {
          try {
            const res = await fetch(path, { cache: 'no-store' });
            if (!res.ok) return false;
            const manifest = await res.json();

            // entry 파일 자동 탐색
            const entry =
              manifest['src/main.ts'] ||
              manifest['src/main.tsx'] ||
              manifest['src/main.js'] ||
              Object.values(manifest)[0];

            const file = entry && (entry.file || entry.src || entry);
            if (!file) return false;

            const fullPath = file.startsWith('/') ? file : '/' + file;
            await import(fullPath);
            return true;
          } catch {
            return false;
          }
        }

        // 순서대로 manifest 경로 시도
        for (const p of manifestPaths) {
          const ok = await loadManifest(p);
          if (ok) return;
        }

        // 개발 모드 또는 fallback
        try {
          await import('/src/main.ts');
        } catch (e) {
          console.error('Flexcoin app load failed:', e);
          const warn = document.createElement('div');
          warn.textContent =
            '⚠️ Flexcoin build assets not found — check GitHub Pages artifact.';
          warn.style.cssText =
            'position:fixed;top:0;left:0;right:0;background:#2b1b1b;color:#ffbbbb;padding:8px;font-size:14px;text-align:center;z-index:9999;';
          document.body.appendChild(warn);
        }
      })();
    </script>
  </body>
</html>
