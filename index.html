<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Flexcoin — $FLEX</title>
    <meta name="description" content="Flexcoin — Luxury × Meme. $FLEX"/>
    <meta property="og:title" content="Flexcoin — $FLEX"/>
    <meta property="og:description" content="Survive the memecoin sector with style."/>
    <meta property="og:type" content="website"/>
    <link rel="icon" href="/favicon.ico"/>
  </head>
  <body>
    <div id="app"></div>

    <!-- ================================
         Flexcoin Multi-Path Loader (Vite)
         ================================ -->
    <script type="module">
      (async () => {
        const candidates = [
          '/.vite/manifest.json',  // Vite 5 기본 위치
          '/manifest.json',        // 레포/설정 따라 생성될 수 있음
          '/assets/manifest.json'  // 예전/커스텀
        ];

        async function tryManifest(url) {
          try {
            const res = await fetch(url, { cache: 'no-store' });
            if (!res.ok) return false;
            const m = await res.json();

            const rec =
              m['src/main.ts'] ||
              m['src/main.tsx'] ||
              m['src/main.js'] ||
              Object.values(m)[0];

            const file = rec && (rec.file || rec.src || rec);
            if (!file) return false;

            const path = file.startsWith('/') ? file : '/' + file;
            await import(path);
            return true;
          } catch {
            return false;
          }
        }

        for (const p of candidates) {
          if (await tryManifest(p)) return;
        }

        // 개발/폴백(배포 번들이 없을 때만 사용됨)
        try {
          await import('/src/main.ts');
        } catch (e) {
          const div = document.createElement('div');
          div.textContent = '앱 스크립트 로드 실패(배포 아티팩트 확인 필요)';
          div.style.cssText =
            'position:sticky;top:0;z-index:9999;background:#291e1e;color:#ffd1d1;padding:8px 12px;border-bottom:1px solid #553;';
          document.body.prepend(div);
          console.error(e);
        }
      })();
    </script>
  </body>
</html>
