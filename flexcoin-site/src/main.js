async function loadJSON(u){const r=await fetch(u);return r.json();}
function preload(u){u.forEach(s=>{const i=new Image();i.src=s;});}
function drawDonut(c,items){const x=c.getContext('2d');const DPR=window.devicePixelRatio||1;const W=c.clientWidth*DPR,H=c.clientHeight*DPR;c.width=W;c.height=H;const cx=W/2,cy=H/2,R=Math.min(W,H)/2-8*DPR,r=R*0.62;const total=items.reduce((a,b)=>a+b.value,0)||1;let a0=-Math.PI/2;const base=[50,120,190,260,320];items.forEach((it,idx)=>{const a1=a0+2*Math.PI*(it.value/total);const hue=base[idx%base.length];x.beginPath();x.arc(cx,cy,R,a0,a1);x.arc(cx,cy,r,a1,a0,true);x.closePath();x.fillStyle=`hsl(${hue} 80% 58%)`;x.fill();a0=a1;});x.fillStyle='#f5e6b3';x.font=`${16*(window.devicePixelRatio||1)}px system-ui`;x.textAlign='center';x.fillText('Tokenomics',cx,cy+6*(window.devicePixelRatio||1));}
(async function(){const pre=await loadJSON('config/addresses.json');document.getElementById('btn-pancake').href=pre.links.pancake;document.getElementById('btn-bscscan').href=pre.links.bscscan;document.getElementById('btn-telegram').href=pre.links.telegram;document.getElementById('btn-twitter').href=pre.links.twitter;const cd=()=>{const t=new Date(pre.presale_kst.start);const now=new Date();const diff=t-now;const d=Math.max(0,Math.floor(diff/86400000));const h=Math.max(0,Math.floor((diff%86400000)/3600000));const m=Math.max(0,Math.floor((diff%3600000)/60000));const s=Math.max(0,Math.floor((diff%60000)/1000));document.getElementById('cd-days').textContent=d;document.getElementById('cd-hours').textContent=h.toString().padStart(2,'0');document.getElementById('cd-mins').textContent=m.toString().padStart(2,'0');document.getElementById('cd-secs').textContent=s.toString().padStart(2,'0');};cd();setInterval(cd,1000);const heroImgs=Array.from({length:8},(_,i)=>`public/hero/${i+1}.jpg`);preload(heroImgs);const hi=document.getElementById('hero-img');let idx=0;setInterval(()=>{idx=(idx+1)%heroImgs.length;hi.style.opacity=0;setTimeout(()=>{hi.src=heroImgs[idx];hi.style.opacity=1;},300);},4500);const grid=(id,folder,prefix)=>{const el=document.getElementById(id);el.innerHTML=Array.from({length:8},(_,i)=>`<div class="card"><img src="public/${folder}/${i+1}.jpg" alt="${prefix} ${i+1}"/><div class="cap">${prefix} ${i+1}</div></div>`).join('');};grid('action-grid','action','Action');grid('nft-grid','nft-preview','NFT');const canvas=document.getElementById('donut');drawDonut(canvas,pre.tokenomics);const legend=document.getElementById('legend');const hues=[50,120,190,260,320];legend.innerHTML=pre.tokenomics.map((t,i)=>`<div style="display:flex;align-items:center;gap:8px"><span style="width:12px;height:12px;border-radius:50%;background:hsl(${hues[i%5]} 80% 58%)"></span><span>${t.label}: <b>${t.value}%</b></span></div>`).join('');const chips=document.getElementById('chips');chips.innerHTML=pre.tokenomics.map(t=>`<span class="chip">${t.label}: <b>${t.value}%</b></span>`).join('');const langs=['en','ko','ja','zh','es','de','pt','it'];const wp=document.getElementById('wp-grid');wp.innerHTML=langs.map(code=>`<a class="card" href="public/whitepaper/whitepaper_${code}.pdf" target="_blank" rel="noopener"><div class="cap">${code.toUpperCase()} PDF</div></a>`).join('');})();